<template>
  <div :class="['sidebar', { expand: sidebarExpandedFlag }]">
    <div class="avatar-box">
      <div class="user-info">
        <img src="/vite.svg" class="avatar" />
        <span class="username">{{ userName }}</span>
      </div>

      <div class="menu-toggle-wrapper">
        <div class="arrow-wrapper">
          <svg
            class="arrow-icon"
            viewBox="0 0 1024 1024"
            xmlns="http://www.w3.org/2000/svg"
            @click="toggleSidebarExpand"
          >
            <path
              d="M544 522.666667c0-8.533333-4.266667-17.066667-10.666667-23.466667L192 189.866667c-12.8-12.8-34.133333-10.666667-44.8 2.133333-12.8 12.8-10.666667 34.133333 2.133333 44.8l315.733334 285.866667L149.333333 808.533333c-12.8 12.8-14.933333 32-2.133333 44.8 6.4 6.4 14.933333 10.666667 23.466667 10.666667 8.533333 0 14.933333-2.133333 21.333333-8.533333l341.333333-309.333334c6.4-6.4 10.666667-14.933333 10.666667-23.466666z"
            ></path>
            <path
              d="M864 499.2l-341.333333-309.333333c-12.8-12.8-34.133333-10.666667-44.8 2.133333-12.8 12.8-10.666667 34.133333 2.133333 44.8l315.733333 285.866667-315.733333 285.866666c-12.8 12.8-14.933333 32-2.133333 44.8 6.4 6.4 14.933333 10.666667 23.466666 10.666667 8.533333 0 14.933333-2.133333 21.333334-8.533333l341.333333-309.333334c6.4-6.4 10.666667-14.933333 10.666667-23.466666 0-8.533333-4.266667-17.066667-10.666667-23.466667z"
            ></path>
          </svg>
        </div>
      </div>
    </div>
    <span class="title-text">menu</span>
    <div class="menu-box">
      <router-link class="menu-item" :to="{ name: 'platform' }">
        <svg
          class="icon"
          viewBox="100 100 824 824"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M866.133333 469.333333l-281.6 162.133334c-38.4 21.333333-102.4 21.333333-140.8 0L162.133333 469.333333c-38.4 21.333333-38.4 59.733333 0 81.066667l281.6 166.4c38.4 21.333333 102.4 21.333333 140.8 0l281.6-166.4c38.4-21.333333 38.4-59.733333 0-81.066667z"
          ></path>
          <path
            d="M866.133333 396.8l-281.6 166.4c-38.4 21.333333-102.4 21.333333-140.8 0L157.866667 396.8c-38.4-21.333333-38.4-59.733333 0-81.066667l281.6-166.4c38.4-21.333333 102.4-21.333333 140.8 0l281.6 166.4c42.666667 21.333333 42.666667 55.466667 4.266666 81.066667zM866.133333 635.733333l-281.6 162.133334c-38.4 21.333333-102.4 21.333333-140.8 0l-281.6-162.133334c-38.4 21.333333-38.4 59.733333 0 81.066667l281.6 166.4c38.4 21.333333 102.4 21.333333 140.8 0l281.6-166.4c38.4-21.333333 38.4-59.733333 0-81.066667z"
          ></path>
        </svg>
        <span class="menu-text">Platform</span>
      </router-link>
      <router-link class="menu-item" :to="{ name: 'publish' }">
        <svg
          class="icon"
          viewBox="80 -15 924 1024"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M746.027944 190.083832q-11.241517 0-18.906188-7.664671t-12.774451-17.884232-7.664671-20.9501-2.55489-17.884232l0-125.700599 2.043912 0q9.197605 0 17.373253 2.043912t19.928144 9.708583 28.61477 21.461078 42.411178 36.279441q27.592814 24.526946 43.944112 41.389222t25.037924 28.61477 10.730539 19.928144 2.043912 14.307385l0 16.351297-150.227545 0zM1063.856287 671.42515q3.065868 8.175649 4.087824 20.439122t-10.219561 23.50499q-5.10978 5.10978-9.197605 9.708583t-7.153693 7.664671q-4.087824 4.087824-7.153693 6.131737l-86.866267-85.844311q6.131737-5.10978 13.796407-12.263473t12.774451-11.241517q12.263473-11.241517 26.570858-9.708583t23.50499 6.642715q10.219561 5.10978 21.972056 17.884232t17.884232 27.081836zM703.105788 766.467066q22.483034 0 37.812375-12.263473l-198.259481 206.43513-282.05988 0q-19.417166 0-42.411178-11.241517t-42.922156-29.636727-33.213573-42.411178-13.285429-49.56487l0-695.952096q0-21.461078 9.708583-44.966068t26.570858-42.411178 38.323353-31.680639 44.966068-12.774451l391.409182 0 0 127.744511q0 19.417166 6.131737 41.9002t18.906188 41.389222 33.213573 31.680639 49.053892 12.774451l149.205589 0 0 338.267465-140.007984 145.117764q11.241517-16.351297 11.241517-35.768463 0-26.570858-18.906188-45.477046t-45.477046-18.906188l-383.233533 0q-26.570858 0-44.966068 18.906188t-18.39521 45.477046 18.39521 44.966068 44.966068 18.39521l383.233533 0zM319.872255 383.233533q-26.570858 0-44.966068 18.906188t-18.39521 45.477046 18.39521 44.966068 44.966068 18.39521l383.233533 0q26.570858 0 45.477046-18.39521t18.906188-44.966068-18.906188-45.477046-45.477046-18.906188l-383.233533 0zM705.149701 895.233533l13.285429-13.285429 25.548902-25.548902q15.329341-15.329341 33.724551-34.235529t36.790419-37.301397q43.944112-43.944112 99.129741-98.107784l85.844311 85.844311-99.129741 99.129741-36.790419 36.790419-33.724551 33.724551q-14.307385 14.307385-24.015968 24.526946t-10.730539 11.241517q-5.10978 4.087824-11.241517 8.686627t-12.263473 7.664671-18.906188 7.664671-26.05988 8.686627-25.548902 7.153693-18.39521 4.087824q-12.263473 2.043912-16.351297-3.065868t-2.043912-17.373253q1.021956-6.131737 4.087824-18.39521t7.153693-25.037924 7.664671-24.015968 5.620758-15.329341q6.131737-13.285429 16.351297-23.50499z"
          ></path>
        </svg>
        <span class="menu-text">Publish</span>
      </router-link>
      <router-link class="menu-item" :to="{ name: 'history' }">
        <svg
          class="icon"
          viewBox="0 0 1024 1024"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M512 1024C229.248 1024 0 794.752 0 512S229.248 0 512 0s512 229.248 512 512-229.248 512-512 512z m42.666667-486.869333V298.538667C554.666667 275.328 535.552 256 512 256c-23.722667 0-42.666667 19.029333-42.666667 42.538667v256.256a41.984 41.984 0 0 0 12.202667 29.866666l121.258667 121.258667a42.368 42.368 0 0 0 60.032-0.298667 42.666667 42.666667 0 0 0 0.298666-60.032L554.666667 537.130667z"
          ></path>
        </svg>
        <span class="menu-text">History</span>
      </router-link>
      <router-link class="menu-item" :to="{ name: 'statistic' }">
        <svg
          class="icon"
          viewBox="0 0 1024 1024"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M864.1 95.2H157.3c-52.1 0-94.7 42.6-94.7 94.7v640.8c0 52.1 42.6 94.7 94.7 94.7h706.8c52.1 0 94.7-42.6 94.7-94.7V189.9c0-52.1-42.6-94.7-94.7-94.7z m-77.6 327.1l-82.1 197.1c13.8 13.4 22.4 32.2 22.4 53 0 40.9-33.1 74-74 74s-74-33.1-74-74c0-9.7 1.9-19 5.3-27.5L433.2 494c-5.9 1.5-12.1 2.3-18.5 2.3-9.8 0-19.1-1.9-27.7-5.4l-78.5 89.4c1.4 5.7 2.2 11.7 2.2 17.9 0 40.9-33.1 74-74 74s-74-33.1-74-74 33.1-74 74-74c14.4 0 27.9 4.1 39.2 11.3l71.8-81.8c-4.5-9.6-7-20.2-7-31.5 0-40.9 33.1-74 74-74s74 33.1 74 74c0 14.5-4.2 28-11.4 39.4L621 605.3c9.6-4.6 20.3-7.1 31.7-7.1h1.8l81.1-194.7c-15.3-13.6-25-33.3-25-55.4 0-40.9 33.1-74 74-74s74 33.1 74 74c0.1 40.5-32.1 73.2-72.1 74.2z"
          ></path>
        </svg>
        <span class="menu-text">Statistics</span>
      </router-link>
      <router-link class="menu-item" :to="{ name: 'draft' }">
        <svg
          class="icon"
          viewBox="0 0 1024 1024"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M950.424 310.057h-33.765v540.136c0 74.572-60.454 135.033-135.032 135.033H241.498c-74.578 0-135.032-60.461-135.032-135.033V310.057H72.708c-18.641 0-33.758-15.11-33.758-33.758v-67.516c0-18.641 15.117-33.757 33.758-33.757h236.305v-67.515c0-37.282 30.234-67.515 67.516-67.515h270.064c37.289 0 67.516 30.233 67.516 67.515v67.515h236.312c18.641 0 33.758 15.117 33.758 33.757v67.516c0.002 18.649-15.115 33.758-33.755 33.758z m-607.651 67.529c-18.641 0-33.758 15.117-33.758 33.757v337.581c0 18.641 15.117 33.757 33.758 33.757h67.522c18.648 0 33.758-15.117 33.758-33.757V411.343c0-18.641-15.11-33.757-33.758-33.757h-67.522z m303.823-270.078H376.539v67.516h270.057v-67.516z m67.522 303.836c0-18.641-15.11-33.757-33.758-33.757h-67.517c-18.648 0-33.758 15.117-33.758 33.757v337.581c0 18.641 15.11 33.757 33.758 33.757h67.517c18.648 0 33.758-15.117 33.758-33.757V411.344z"
          ></path>
        </svg>
        <span class="menu-text">Draft</span>
      </router-link>
    </div>
    <div class="flex-box"></div>
    <div class="config-box">
      <router-link class="menu-item" :to="{ name: 'config' }">
        <svg
          class="icon"
          viewBox="0 0 1024 1024"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M512 1023.972326a442.786637 442.786637 0 0 1-69.987963-5.673204 96.527487 96.527487 0 0 1-77.487661-66.224276 135.797127 135.797127 0 0 0-130.954148-95.94633 140.861499 140.861499 0 0 0-29.83275 3.210203 96.859577 96.859577 0 0 1-20.091444 2.103237 95.226801 95.226801 0 0 1-74.526525-36.197808 518.862916 518.862916 0 0 1-69.987963-121.046797 96.693532 96.693532 0 0 1 18.956803-100.291173 138.896633 138.896633 0 0 0 0-185.416904 96.665858 96.665858 0 0 1-18.956803-100.291173 484.104165 484.104165 0 0 1 69.987963-121.046797 98.353982 98.353982 0 0 1 76.297672-36.197808 97.025622 97.025622 0 0 1 20.20214 2.103237 137.097812 137.097812 0 0 0 29.722053 3.293225 137.761992 137.761992 0 0 0 131.064845-96.029352 96.41679 96.41679 0 0 1 77.487661-66.196602 558.381623 558.381623 0 0 1 69.185412-4.261821 591.12016 591.12016 0 0 1 70.679817 4.261821 96.41679 96.41679 0 0 1 77.487662 66.196602 133.251104 133.251104 0 0 0 62.405242 77.487662 138.896633 138.896633 0 0 0 68.714951 18.458668 136.433633 136.433633 0 0 0 29.666704-3.293226 97.025622 97.025622 0 0 1 20.202141-2.103236 92.016598 92.016598 0 0 1 74.388155 36.197807 655.683987 655.683987 0 0 1 68.106119 122.92864 96.665858 96.665858 0 0 1-18.956803 100.291174 138.896633 138.896633 0 0 0 0 185.416904 96.693532 96.693532 0 0 1 18.956803 100.291173 480.28513 480.28513 0 0 1-69.987962 121.046797 97.163993 97.163993 0 0 1-75.246055 36.197808 88.557327 88.557327 0 0 1-19.371915-2.103237 136.433633 136.433633 0 0 0-29.666705-3.293226 137.928037 137.928037 0 0 0-131.120193 96.029352 96.499813 96.499813 0 0 1-77.487661 66.224277c-22.720489 2.047888-46.963058 3.874383-69.849592 3.874383z m-8.911081-691.854121a193.719154 193.719154 0 1 0 193.719154 193.719154 193.912873 193.912873 0 0 0-193.719154-193.719154z m0 304.415813a110.696659 110.696659 0 1 1 110.696659-110.696659 110.862704 110.862704 0 0 1-110.696659 110.696659z"
          ></path>
        </svg>
        <span class="menu-text">Config</span>
      </router-link>
    </div>
  </div>
</template>
<script>
export default {
  data() {
    return {
      sidebarExpandedFlag: false,
      userName: "Alex",
    };
  },
  methods: {
    toggleSidebarExpand() {
      this.sidebarExpandedFlag = !this.sidebarExpandedFlag;
    },
  },
};
</script>

<style lang="scss" scoped>
.sidebar {
  overflow: hidden;
  user-select: none;
  width: $icon-size-regular + 2rem;
  height: 100vh;
  padding: 3.5rem 1rem 2.5rem 1rem;
  @include flex-box(column);
  transition: width 0.2s ease-out;

  .avatar-box {
    @include flex-box(column);
    gap: 0.5rem;

    .user-info {
      @include flex-box(row);
      align-items: center;
      justify-content: start;
      gap: 1rem;
      .avatar {
        min-width: $avatar-size;
        width: $avatar-size;
        height: $avatar-size;
      }
      .username {
        font-size: 2.5rem;
        color: $primary-color;
        opacity: 0;
        transition: opacity 0.2s ease-out;
      }
    }
    .menu-toggle-wrapper {
      @include flex-box(row);
      justify-content: flex-end;
      align-items: center;
      position: relative;
      top: 0;

      transition: top 0.2s ease-out;
      .arrow-wrapper {
        transition: transform 0.2s ease-out;
      }
      .arrow-icon {
        transition: transform 0.2s ease-out;
        @include icon-style($icon-size-small);

        align-self: center;
        &:hover {
          fill: $primary-color;
          transform: translateX(0.5rem);
        }
      }
    }
  }

  .menu-box,
  .config-box {
    @include flex-box(column);
    gap: 1.3rem;

    .menu-item {
      @include flex-box(row);
      text-decoration: none;
      gap: 1.3rem;
      align-items: center;
      justify-content: start;
      font-size: 1.4rem;

      .menu-text {
        color: $icon-color-gray;
        transition: transform 0.2s ease-out, color 0.2s ease-out;
      }
      .icon {
        @include icon-style();
        min-width: $icon-size-regular;
      }
      &:hover {
        .icon {
          fill: $primary-color;
          transform: scale(1.2);
        }
        .menu-text {
          color: $primary-color;
          transform: scale(1.1);
        }
      }
    }
  }

  .title-text {
    margin-top: 1rem;
    margin-bottom: 1.3rem;
    text-align: left;

    transition: opacity 0.2s ease-out;
    text-transform: uppercase;
    font-weight: $font-weight-bold;
    color: $text-secondary-color;
  }

  .title-text,
  .menu-text {
    opacity: 0;
  }
  .flex-box {
    flex: 1 1 0;
  }

  .icon,
  .arrow-icon {
    cursor: pointer;
    fill: $icon-color-gray;
    transition: transform 0.2s ease-out, fill 0.2s ease-out;
  }

  .router-link-active {
    .icon {
      fill: $primary-color !important;
      transform: scale(1.2);
    }
    .menu-text {
      color: $primary-color !important;
      transform: scale(1.1);
    }
  }

  &.expand {
    width: $sidebar-width;
    .avatar-box {
      .user-info {
        .username {
          opacity: 1;
        }
      }
      .menu-toggle-wrapper {
        position: relative;
        top: -$avatar-size - 0.25rem;

        .arrow-wrapper {
          transform: rotate(-180deg);
        }
      }
    }
    .title-text,
    .menu-text {
      opacity: 1;
    }
  }
}
</style>
